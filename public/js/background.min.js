function preprocessWord(a){return-1===a.indexOf(" ")&&(a=a.replace(/_/g," "),/[a-z]+/.test(a)&&(a=trim(a.replace(/([A-Z])/g," $1")))),a}function showNotification(a){if(Notifications){var b=null,c=Notifications.checkPermission();return 0===c?(b=Notifications.createNotification(a.icon||chrome.extension.getURL("icons/icon128.png"),a.title||"ChaZD 查字典",a.content),b.onclick=function(){window.open("https://chrome.google.com/webstore/detail/chazd/nkiipedegbhbjmajlhpegcpcaacbfggp")},b.show()):Notifications.requestPermission(),b}}window.Notifications=window.Notifications||window.webkitNotifications,chrome.runtime.onInstalled.addListener(function(a){"install"===a.reason?showNotification({title:"感谢支持 ChaZD ！",content:"ChaZD 力求成为最简洁易用的 Chrome 词典扩展，欢迎提出您的意见或建议。如果觉得 ChaZD 还不错，记得给5星好评哦:)"}):"update"===a.reason&&(chrome.storage.sync.set({showTips:!0},function(){}),showNotification({title:"ChaZD 更新到0.8.19版！",content:"修复若干 bug，如出现无法查词的问题，请在设置中关闭使用 HTTPS 接口"}))}),chrome.storage.sync.get(null,function(a){if(void 0===a.showTips)chrome.storage.sync.set(settings);else{for(var b in a)void 0===settings[b]?chrome.storage.sync.remove(b):settings[b]=a[b];chrome.storage.sync.set(settings)}}),chrome.runtime.onMessage.addListener(function(a,b,c){var d=new api[currentSettings.apiName];return d.Query(preprocessWord(a.queryWord),a.source,c),!0});